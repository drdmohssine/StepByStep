#Starting a New Project
django-admin startproject myproject

#Run localy
python manage.py runserver

#Django Apps
django-admin startapp AppName
#settings.py
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    'AppName',
]
##################################################################################
#Hello, World!
#views.py

from django.http import HttpResponse

def home(request):
    return HttpResponse('Hello, World!')

#urls.py

from django.conf.urls import url
from django.contrib import admin

from boards import views

urlpatterns = [
    url(r'^$', views.home, name='home'),
    url(r'^admin/', admin.site.urls),
]
##################################################################################

#boards/models.py
from django.db import models
from django.contrib.auth.models import User


class Board(models.Model):
    name = models.CharField(max_length=30, unique=True)
    description = models.CharField(max_length=100)


class Topic(models.Model):
    subject = models.CharField(max_length=255)
    last_updated = models.DateTimeField(auto_now_add=True)
    board = models.ForeignKey(Board, related_name='topics')
    starter = models.ForeignKey(User, related_name='topics')


class Post(models.Model):
    message = models.TextField(max_length=4000)
    topic = models.ForeignKey(Topic, related_name='posts')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(null=True)
    created_by = models.ForeignKey(User, related_name='posts')
    updated_by = models.ForeignKey(User, null=True, related_name='+')

#Migrating the Models
python manage.py makemigrations
#you can run the following command to inspect the SQL instructions that will be executed in the database
python manage.py sqlmigrate boards 0001

#apply the migration we generated to the database
python manage.py migrate

#You can start a Python shell with our project loaded using the manage.py utility
python manage.py shell
#importing the Board class
from boards.models import Board
#create a new board object, we can do the following
board = Board(name='Django', description='This is a board about Django.')
#To persist this object in the database, we have to call the save method
board.save()
#You can access the rest of the fields as Python attributes
board.name
#To update a value we could do
board.description = 'Django discussion board.'
board.save()

#We can use the objects to list all existing boards in the database
Board.objects.all()

#exit the interactive console
exit()

#The __str__ method is a String representation of an object. We can use the board name to represent it.
class Board(models.Model):
    name = models.CharField(max_length=30, unique=True)
    description = models.CharField(max_length=100)

    def __str__(self):
        return self.name

#Let’s try the query again. Open the interactive console again
python manage.py shell
from boards.models import Board
Board.objects.all()
#we can use the model Manager to query the database and return a single object.
django_board = Board.objects.get(id=1)
django_board.name

##################################################################################

#Views, Templates, and Static Files

#boards/views.py
from django.http import HttpResponse
from .models import Board

def home(request):
    boards = Board.objects.all()
    boards_names = list()

    for board in boards:
        boards_names.append(board.name)

    response_html = '<br>'.join(boards_names)

    return HttpResponse(response_html)

#Django Template Engine Setup
#Create a new folder named templates alongside with the boards and mysite folders
#Now within the templates folder, create an HTML file named home.html
#templates/home.html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Boards</title>
  </head>
  <body>
    <h1>Boards</h1>

    {% for board in boards %}
      {{ board.name }} <br>
    {% endfor %}

  </body>
</html>

#Open the settings.py inside the myproject directory and search for the TEMPLATES variable and set the DIRS key to os.path.join(BASE_DIR, 'templates')
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [
            os.path.join(BASE_DIR, 'templates')
        ],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

#Now we can update our home view:
#boards/views.py
from django.shortcuts import render
from .models import Board

def home(request):
    boards = Board.objects.all()
    return render(request, 'home.html', {'boards': boards})

#We can improve the HTML template to use a table instead:
#templates/home.html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Boards</title>
  </head>
  <body>
    <h1>Boards</h1>

    <table border="1">
      <thead>
        <tr>
          <th>Board</th>
          <th>Posts</th>
          <th>Topics</th>
          <th>Last Post</th>
        </tr>
      </thead>
      <tbody>
        {% for board in boards %}
          <tr>
            <td>
              {{ board.name }}<br>
              <small style="color: #888">{{ board.description }}</small>
            </td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>

##################################################################################
#Static Files Setup

#learn After

##################################################################################

#Let’s start by creating an administrator account
python manage.py createsuperuser

#To add the Board model is very straightforward. Open the admin.py file in the boards directory, and add the following code:
#boards/admin.py
from django.contrib import admin
from .models import Board
admin.site.register(Board)

##################################################################################




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































